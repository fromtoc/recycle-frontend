{"version":3,"sources":["webpack:///./src/views/system/dept.vue?8b24","webpack:///src/views/system/dept.vue","webpack:///./src/views/system/dept.vue?b4b4","webpack:///./src/views/system/dept.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","path","_v","staticClass","on","search","model","value","queryMap","callback","$$v","$set","expression","slot","directives","name","rawName","$event","addDialogVisible","downExcel","departmentData","scopedSlots","_u","key","fn","scope","domProps","_s","row","total","edit","id","del","pageNum","pageSize","handleSizeChange","handleCurrentChange","closeAddDialog","ref","addRuleForm","addRules","btnDisabled","btnLoading","add","editDialogVisible","closeEditDialog","editRuleForm","update","staticRenderFns","$refs","editRuleFormRef","validate","component"],"mappings":"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","file":"js/chunk-2d0df40a.764f1993.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"departments\"}},[_c('el-breadcrumb',{staticStyle:{\"padding-left\":\"10px\",\"padding-bottom\":\"10px\",\"font-size\":\"12px\"},attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首頁\")]),_c('el-breadcrumb-item',[_vm._v(\"系统管理\")]),_c('el-breadcrumb-item',[_vm._v(\"公司管理\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"size\":\"small\",\"clearable\":\"\",\"placeholder\":\"請輸入公司查詢\"},on:{\"clear\":_vm.search},model:{value:(_vm.queryMap.name),callback:function ($$v) {_vm.$set(_vm.queryMap, \"name\", $$v)},expression:\"queryMap.name\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.search},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('department:add'),expression:\"'department:add'\"}],attrs:{\"size\":\"small\",\"type\":\"success\",\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){_vm.addDialogVisible=true}}},[_vm._v(\"添加\")])],1),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('department:export'),expression:\"'department:export'\"}],attrs:{\"size\":\"small\",\"icon\":\"el-icon-download\"},on:{\"click\":_vm.downExcel}},[_vm._v(\"導出\")])],1)],1),[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\",\"margin-top\":\"20px\"},attrs:{\"border\":\"\",\"size\":\"small\",\"stripe\":\"\",\"data\":_vm.departmentData,\"height\":\"460\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"type\":\"index\",\"label\":\"ID\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"label\":\"辦公電話\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"公司名\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"total\",\"label\":\"人數\",\"sortable\":\"\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"effect\":\"plain\",\"size\":\"small\"},domProps:{\"textContent\":_vm._s(scope.row.total+'人')}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"創建時間\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"modifiedTime\",\"label\":\"修改時間\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"address\",\"label\":\"地址\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('department:edit'),expression:\"'department:edit'\"}],attrs:{\"type\":\"text\",\"size\":\"small\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.edit(scope.row.id)}}},[_vm._v(\"編輯\")]),_c('el-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('department:delete'),expression:\"'department:delete'\"}],attrs:{\"type\":\"text\",\"size\":\"small\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.del(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1)],_c('el-pagination',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"background\":\"\",\"current-page\":this.queryMap.pageNum,\"page-sizes\":[7, 10, 15, 20],\"page-size\":this.queryMap.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":\"添加公司\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.closeAddDialog}},[_c('span',[_c('el-form',{ref:\"addRuleFormRef\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.addRuleForm,\"rules\":_vm.addRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"公司名稱\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.addRuleForm.name),callback:function ($$v) {_vm.$set(_vm.addRuleForm, \"name\", $$v)},expression:\"addRuleForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"辦公電話\",\"prop\":\"phone\"}},[_c('el-input',{model:{value:(_vm.addRuleForm.phone),callback:function ($$v) {_vm.$set(_vm.addRuleForm, \"phone\", $$v)},expression:\"addRuleForm.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"辦公地址\",\"prop\":\"address\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.addRuleForm.address),callback:function ($$v) {_vm.$set(_vm.addRuleForm, \"address\", $$v)},expression:\"addRuleForm.address\"}})],1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.btnDisabled,\"loading\":_vm.btnLoading},on:{\"click\":_vm.add}},[_vm._v(\"確 定\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"更新公司\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.closeEditDialog}},[_c('span',[_c('el-form',{ref:\"editRuleFormRef\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.editRuleForm,\"rules\":_vm.addRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"公司名稱\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.editRuleForm.name),callback:function ($$v) {_vm.$set(_vm.editRuleForm, \"name\", $$v)},expression:\"editRuleForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"辦公電話\",\"prop\":\"phone\"}},[_c('el-input',{model:{value:(_vm.editRuleForm.phone),callback:function ($$v) {_vm.$set(_vm.editRuleForm, \"phone\", $$v)},expression:\"editRuleForm.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"辦公地址\",\"prop\":\"address\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.editRuleForm.address),callback:function ($$v) {_vm.$set(_vm.editRuleForm, \"address\", $$v)},expression:\"editRuleForm.address\"}})],1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.btnDisabled,\"loading\":_vm.btnLoading},on:{\"click\":_vm.update}},[_vm._v(\"確 定\")])],1)])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"departments\">\n        <!-- 面包導航 -->\n        <el-breadcrumb separator=\"/\" style=\"padding-left:10px;padding-bottom:10px;font-size:12px;\">\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首頁</el-breadcrumb-item>\n            <el-breadcrumb-item>系统管理</el-breadcrumb-item>\n            <el-breadcrumb-item>公司管理</el-breadcrumb-item>\n        </el-breadcrumb>\n        <!-- 右側卡片區域 -->\n        <!-- 用戶列表卡片區 -->\n        <el-card class=\"box-card\">\n            <el-row :gutter=\"20\">\n                <el-col :span=\"8\">\n                    <el-input\n                            size=\"small\"\n                            clearable\n                            v-model=\"queryMap.name\"\n                            placeholder=\"請輸入公司查詢\"\n                            @clear=\"search\"\n                            class=\"input-with-select\"\n                    >\n                        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"search\"></el-button>\n                    </el-input>\n                </el-col>\n                <el-col :span=\"2\">\n                    <el-button\n                            size=\"small\"\n                            v-hasPermission=\"'department:add'\"\n                            type=\"success\"\n                            icon=\"el-icon-circle-plus-outline\"\n                            @click=\"addDialogVisible=true\"\n                    >添加</el-button>\n                </el-col>\n                <el-col :span=\"2\">\n                    <el-button\n                            size=\"small\"\n                            icon=\"el-icon-download\"\n                            v-hasPermission=\"'department:export'\"\n                            @click=\"downExcel\"\n                    >導出</el-button>\n                </el-col>\n            </el-row>\n            <!-- 表格區域 -->\n            <template>\n                <el-table\n                        border\n                        size=\"small\"\n                        v-loading=\"loading\"\n                        stripe\n                        :data=\"departmentData\"\n                        style=\"width: 100%;margin-top:20px;\"\n                        height=\"460\"\n                >\n                    <el-table-column prop=\"id\" type=\"index\" label=\"ID\" width=\"50\"></el-table-column>\n                    <el-table-column prop=\"phone\" label=\"辦公電話\" width=\"180\"></el-table-column>\n                    <el-table-column prop=\"name\" label=\"公司名\" width=\"120\"></el-table-column>\n                    <el-table-column prop=\"total\" label=\"人數\" sortable width=\"100\">\n                        <template slot-scope=\"scope\">\n                            <el-tag effect=\"plain\" v-text=\"scope.row.total+'人'\" size=\"small\">\n                            </el-tag>\n                        </template>\n                    </el-table-column>\n                    <el-table-column prop=\"createTime\" label=\"創建時間\" sortable></el-table-column>\n                    <el-table-column prop=\"modifiedTime\" label=\"修改時間\" sortable></el-table-column>\n                    <el-table-column prop=\"address\" label=\"地址\"></el-table-column>\n                    <el-table-column label=\"操作\">\n                        <template slot-scope=\"scope\">\n                            <el-button\n                                    v-hasPermission=\"'department:edit'\"\n                                    type=\"text\"\n                                    size=\"small\"\n                                    icon=\"el-icon-edit\"\n                                    @click=\"edit(scope.row.id)\"\n                            >編輯</el-button>\n\n                            <el-button\n                                    v-hasPermission=\"'department:delete'\"\n                                    type=\"text\"\n                                    size=\"small\"\n                                    icon=\"el-icon-delete\"\n                                    @click=\"del(scope.row.id)\"\n                            >删除</el-button>\n                        </template>\n                    </el-table-column>\n                </el-table>\n            </template>\n            <!-- 分頁 -->\n            <el-pagination\n                    style=\"margin-top:10px;\"\n                    background\n                    @size-change=\"handleSizeChange\"\n                    @current-change=\"handleCurrentChange\"\n                    :current-page=\"this.queryMap.pageNum\"\n                    :page-sizes=\"[7, 10, 15, 20]\"\n                    :page-size=\"this.queryMap.pageSize\"\n                    layout=\"total, sizes, prev, pager, next, jumper\"\n                    :total=\"total\"\n            ></el-pagination>\n            <!-- 公司別添加彈出框 -->\n            <el-dialog title=\"添加公司\" :visible.sync=\"addDialogVisible\" width=\"50%\" @close=\"closeAddDialog\">\n        <span>\n          <el-form\n                  :model=\"addRuleForm\"\n                  :rules=\"addRules\"\n                  ref=\"addRuleFormRef\"\n                  label-width=\"100px\"\n                  class=\"demo-ruleForm\"\n          >\n            <el-form-item label=\"公司名稱\" prop=\"name\">\n              <el-input v-model=\"addRuleForm.name\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"辦公電話\" prop=\"phone\">\n              <el-input v-model=\"addRuleForm.phone\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"辦公地址\" prop=\"address\">\n              <el-input type=\"textarea\" v-model=\"addRuleForm.address\"></el-input>\n            </el-form-item>\n          </el-form>\n        </span>\n                <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"addDialogVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"add\" :disabled=\"btnDisabled\" :loading=\"btnLoading\">確 定</el-button>\n        </span>\n            </el-dialog>\n\n            <!-- 公司別編輯彈出框 -->\n            <el-dialog\n                    title=\"更新公司\"\n                    :visible.sync=\"editDialogVisible\"\n                    width=\"50%\"\n                    @close=\"closeEditDialog\"\n            >\n        <span>\n          <el-form\n                  :model=\"editRuleForm\"\n                  :rules=\"addRules\"\n                  ref=\"editRuleFormRef\"\n                  label-width=\"100px\"\n                  class=\"demo-ruleForm\"\n          >\n            <el-form-item label=\"公司名稱\" prop=\"name\">\n              <el-input v-model=\"editRuleForm.name\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"辦公電話\" prop=\"phone\">\n              <el-input v-model=\"editRuleForm.phone\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"辦公地址\" prop=\"address\">\n              <el-input type=\"textarea\" v-model=\"editRuleForm.address\"></el-input>\n            </el-form-item>\n          </el-form>\n        </span>\n                <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"editDialogVisible = false\">取 消</el-button>\n          <el-button\n                  type=\"primary\"\n                  @click=\"update\"\n                  :disabled=\"btnDisabled\"\n                  :loading=\"btnLoading\"\n          >確 定</el-button>\n        </span>\n            </el-dialog>\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import axios from \"axios\";\n    export default {\n        data() {\n            const checkPhone = (rule, value, callback) => {\n                const phoneReg = /^1[34578]\\d{9}$$/;\n                if (!value) {\n                    return callback(new Error(\"電話號碼不能為空\"));\n                }\n                setTimeout(() => {\n                    if (!Number.isInteger(+value)) {\n                        callback(new Error(\"請輸入數字值\"));\n                    } else {\n                        if (phoneReg.test(value)) {\n                            callback();\n                        } else {\n                            callback(new Error(\"電話號碼格式不正確\"));\n                        }\n                    }\n                }, 100);\n            };\n            return {\n                btnLoading: false,\n                btnDisabled: false,\n                loading: true,\n                editDialogVisible: false,\n                addDialogVisible: false, //添加彈框是否顯示\n                total: 0, //總共多少條數據\n                departmentData: [], //表格數據\n                queryMap: { pageNum: 1, pageSize: 7, name: \"\" }, //查詢對象\n                addRuleForm: {}, //添加表單數據\n                editRuleForm: {}, //修改表單數據\n                addRules: {\n                    name: [\n                        { required: true, message: \"請輸入公司名稱\", trigger: \"blur\" },\n                        { min: 3, max: 10, message: \"長度在 3 到 10 個字符\", trigger: \"blur\" }\n                    ],\n                    address: [\n                        { required: true, message: \"請輸入辦公地址\", trigger: \"blur\" },\n                        { min: 4, max: 12, message: \"長度在 4 到 12 個字符\", trigger: \"blur\" }\n                    ],\n                    phone: [\n                        {\n                            required: true,\n                            message: \"請輸入聯公司方式\",\n                            validator: checkPhone,\n                            trigger: \"blur\"\n                        }\n                    ]\n                } //添加驗證\n            };\n        },\n        methods: {\n            /**\n             * 加載公司表格\n             */\n            downExcel() {\n                const $this = this;\n                const res = axios\n                    .request({\n                        url: \"system/department/excel\",\n                        method: \"post\",\n                        responseType: \"blob\"\n                    })\n                    .then(res => {\n                        if (res.headers[\"content-type\"] === \"application/json\") {\n                            return $this.$message.error(\n                                \"Subject does not have permission [department:export]\"\n                            );\n                        }\n                        const data = res.data;\n                        let url = window.URL.createObjectURL(data); // 將二進制文件轉化為可訪問的url\n                        var a = document.createElement(\"a\");\n                        document.body.appendChild(a);\n                        a.href = url;\n                        a.download = \"公司列表.xls\";\n                        a.click();\n                        window.URL.revokeObjectURL(url);\n                    });\n            },\n            /**\n             * 搜索公司\n             */\n            search() {\n                this.queryMap.pageNum = 1;\n                this.getDepartmentList();\n            },\n            /**\n             * 删除公司\n             */\n            del: async function (id) {\n                let res = await this.$confirm(\n                    \"此操作將永久删除該用戶, 是否繼續?\",\n                    \"提示\",\n                    {\n                        confirmButtonText: \"確定\",\n                        cancelButtonText: \"取消\",\n                        type: \"warning\"\n                    }\n                ).catch(() => {\n                    this.$message({\n                        type: \"info\",\n                        message: \"已取消删除\"\n                    });\n                });\n                if (\"confirm\" === res) {\n                    const {data: res} = await this.$http.delete(\n                        \"system/department/delete/\" + id\n                    );\n                    if (res.success) {\n                        this.$message.success(\"公司删除成功\");\n                        await this.getDepartmentList();\n                    } else {\n                        this.$message.error(res.data.errorMsg);\n                    }\n                }\n            },\n            /**\n             * 更新用戶\n             */\n            update: async function () {\n                this.$refs.editRuleFormRef.validate(async valid => {\n                    if (!valid) {\n                        return;\n                    } else {\n                        (this.btnLoading = true), (this.btnDisabled = true);\n                        const {data: res} = await this.$http.put(\n                            \"system/department/update/\" + this.editRuleForm.id,\n                            this.editRuleForm\n                        );\n                        if (res.code === 200) {\n                            this.$notify({\n                                title: \"成功\",\n                                message: \"公司信息更新\",\n                                type: \"success\"\n                            });\n                            await this.getDepartmentList();\n                        } else {\n                            this.$message.error(\"公司信息更新失敗:\" + res.data.errorMsg);\n                        }\n                        this.editRuleForm = {};\n                        this.btnDisabled = false;\n                        this.btnLoading = false;\n                        this.editDialogVisible = false;\n                    }\n                });\n            },\n            /**\n             * 編輯\n             * @param {Object} id\n             */\n            edit: async function (id) {\n                const {data: res} = await this.$http.get(\"system/department/edit/\" + id);\n                if (res.success) {\n                    this.editRuleForm = res.data;\n                } else {\n                    return this.$message.error(\"公司信息編輯失敗\" + res.data.errorMsg);\n                }\n                this.editDialogVisible = true;\n            },\n            //添加\n            add: function () {\n                this.$refs.addRuleFormRef.validate(async valid => {\n                    if (!valid) {\n                        return;\n                    } else {\n                        (this.btnLoading = true), (this.btnDisabled = true);\n                        const {data: res} = await this.$http.post(\n                            \"system/department/add\",\n                            this.addRuleForm\n                        );\n                        if (res.success) {\n                            this.$message.success(\"公司添加成功\");\n                            this.addRuleForm = {};\n                            await this.getDepartmentList();\n                        } else {\n                            return this.$message.error(\"公司添加失敗:\" + res.data.errorMsg);\n                        }\n                        this.addDialogVisible = false;\n                        (this.btnLoading = false), (this.btnDisabled = false);\n                    }\n                });\n            },\n            //加載公司別列表\n            async getDepartmentList() {\n                const { data: res } = await this.$http.get(\n                    \"system/department/findDepartmentList\",\n                    {\n                        params: this.queryMap\n                    }\n                );\n                if (!res.success) {\n                    return this.$message.error(\"獲取用戶列表失敗:\"+res.data.errorMsg);\n                } else {\n                    this.total = res.data.total;\n                    this.departmentData = res.data.rows;\n                }\n            },\n            //改變頁碼\n            handleSizeChange(newSize) {\n                this.queryMap.pageSize = newSize;\n                this.getDepartmentList();\n            },\n            //翻頁\n            handleCurrentChange(current) {\n                this.queryMap.pageNum = current;\n                this.getDepartmentList();\n            },\n            //關閉彈出框\n            closeAddDialog() {\n                this.$refs.addRuleFormRef.clearValidate();\n                this.addRuleForm = {};\n            },\n            //關閉彈出框\n            closeEditDialog() {\n                this.$refs.editRuleFormRef.clearValidate();\n                this.editRuleForm = {};\n            }\n        },\n        created() {\n            this.getDepartmentList();\n            setTimeout(() => {\n                this.loading = false;\n            }, 500);\n        }\n    };\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dept.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dept.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dept.vue?vue&type=template&id=25bcf83e&\"\nimport script from \"./dept.vue?vue&type=script&lang=js&\"\nexport * from \"./dept.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}