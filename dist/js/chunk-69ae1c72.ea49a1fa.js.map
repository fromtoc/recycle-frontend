{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./src/views/system/role.vue?d1ff","webpack:///src/views/system/role.vue","webpack:///./src/views/system/role.vue?180f","webpack:///./src/views/system/role.vue"],"names":["global","DOMIterables","DOMTokenListPrototype","forEach","createNonEnumerableProperty","handlePrototype","CollectionPrototype","error","COLLECTION_NAME","prototype","$forEach","arrayMethodIsStrict","STRICT_METHOD","module","exports","callbackfn","this","arguments","length","undefined","$","fails","isArray","isObject","toObject","lengthOfArrayLike","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","FORCED","target","proto","forced","arg","i","k","len","E","A","n","TypeError","METHOD_NAME","argument","method","call","render","_vm","_h","$createElement","_c","_self","attrs","staticStyle","path","_v","staticClass","on","getRoleList","model","value","queryMap","callback","$$v","$set","expression","search","slot","directives","name","rawName","$event","addDialogVisible","downExcel","roleData","getIndex","showSex","scopedSlots","_u","key","fn","scope","row","type","changRoleStatus","grant","id","edit","pageNum","pageSize","total","handleSizeChange","handleCurrentChange","closeAdd","ref","addForm","addFormRoles","btnLoading","btnDisabled","addRole","editDialogVisible","closeEdit","editForm","updateRole","grantDialogVisible","data","open","defaultProps","checkChange","authority","staticRenderFns","loading","grantId","children","label","roleName","methods","index","anode","checked","findchildren","parent","fnode","isLeaf","indeterminate","$refs","addFormRef","clearValidate","editFormRef","newSize","current","created","setTimeout","component"],"mappings":"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","file":"js/chunk-69ae1c72.ea49a1fa.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar handlePrototype = function (CollectionPrototype) {\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  if (DOMIterables[COLLECTION_NAME]) {\n    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);\n  }\n}\n\nhandlePrototype(DOMTokenListPrototype);\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"roles\"}},[_c('el-breadcrumb',{staticStyle:{\"padding-left\":\"10px\",\"padding-bottom\":\"10px\",\"font-size\":\"12px\"},attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首頁\")]),_c('el-breadcrumb-item',[_vm._v(\"權限管理\")]),_c('el-breadcrumb-item',[_vm._v(\"角色權限\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"clearable\":\"\",\"size\":\"small\",\"placeholder\":\"請輸入角色名查詢\"},on:{\"clear\":_vm.getRoleList},model:{value:(_vm.queryMap.roleName),callback:function ($$v) {_vm.$set(_vm.queryMap, \"roleName\", $$v)},expression:\"queryMap.roleName\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.search},slot:\"append\"})],1)],1),_c('div',{staticStyle:{\"float\":\"right\",\"margin-right\":\"20px\"}},[_c('el-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('role:add'),expression:\"'role:add'\"}],attrs:{\"size\":\"small\",\"type\":\"success\",\"icon\":\"el-icon-circle-plus-outline\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"新增\")]),_c('el-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('role:export'),expression:\"'role:export'\"}],attrs:{\"size\":\"small\",\"icon\":\"el-icon-download\"},on:{\"click\":_vm.downExcel}},[_vm._v(\"下載\")])],1)],1),[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\",\"margin-top\":\"20px\"},attrs:{\"empty-text\":\"暫無數據\",\"data\":_vm.roleData,\"border\":\"\",\"height\":\"470\",\"size\":\"small\"}},[_c('el-table-column',{attrs:{\"label\":\"序號\",\"type\":\"index\",\"index\":_vm.getIndex,\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色名稱\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"prop\":\"modifiedTime\",\"label\":\"最後修改時間\",\"width\":\"150\"}}),_c('el-table-column',{attrs:{\"prop\":\"type\",\"formatter\":_vm.showSex,\"label\":\"資料權限\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.type == 1)?_c('el-tag',{attrs:{\"size\":\"small\",\"type\":\"warning\"}},[_vm._v(\"限本帳號\")]):_c('el-tag',{attrs:{\"size\":\"small\",\"type\":\"success\"}},[_vm._v(\"所有資料\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":\"備註\"}}),_c('el-table-column',{attrs:{\"prop\":\"isban\",\"label\":\"停用\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.changRoleStatus(scope.row)}},model:{value:(scope.row.status),callback:function ($$v) {_vm.$set(scope.row, \"status\", $$v)},expression:\"scope.row.status\"}})]}}])}),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-present\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.grant(scope.row.id)}}},[_vm._v(\"授權\")]),_c('el-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('role:edit'),expression:\"'role:edit'\"}],attrs:{\"type\":\"text\",\"icon\":\"el-icon-edit\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.edit(scope.row.id)}}},[_vm._v(\"編輯\")])]}}])})],1)],_c('el-pagination',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"background\":\"\",\"current-page\":_vm.queryMap.pageNum,\"page-sizes\":[7, 10, 15, 20],\"page-size\":_vm.queryMap.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_c('el-dialog',{attrs:{\"title\":\"新增角色權限\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.closeAdd}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"label-width\":\"80px\",\"rules\":_vm.addFormRoles}},[_c('el-form-item',{attrs:{\"label\":\"角色名稱\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.addForm.roleName),callback:function ($$v) {_vm.$set(_vm.addForm, \"roleName\", $$v)},expression:\"addForm.roleName\"}})],1),_c('div',{staticClass:\"grid-content bg-purple-light\"},[_c('el-form-item',{attrs:{\"label\":\"資料權限\",\"prop\":\"type\"}},[_c('el-radio-group',{model:{value:(_vm.addForm.type),callback:function ($$v) {_vm.$set(_vm.addForm, \"type\", $$v)},expression:\"addForm.type\"}},[_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"所有資料\")]),_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"限本帳號\")])],1)],1)],1),_c('el-form-item',{attrs:{\"label\":\"描述信息\",\"prop\":\"remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.addForm.remark),callback:function ($$v) {_vm.$set(_vm.addForm, \"remark\", $$v)},expression:\"addForm.remark\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading,\"disabled\":_vm.btnDisabled},on:{\"click\":_vm.addRole}},[_vm._v(\"確 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"編輯角色權限\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.closeEdit}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"label-width\":\"80px\",\"rules\":_vm.addFormRoles}},[_c('el-form-item',{attrs:{\"label\":\"角色名稱\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.editForm.roleName),callback:function ($$v) {_vm.$set(_vm.editForm, \"roleName\", $$v)},expression:\"editForm.roleName\"}})],1),_c('div',{staticClass:\"grid-content bg-purple-light\"},[_c('el-form-item',{attrs:{\"label\":\"資料權限\",\"prop\":\"type\"}},[_c('el-radio-group',{model:{value:(_vm.editForm.type),callback:function ($$v) {_vm.$set(_vm.editForm, \"type\", $$v)},expression:\"editForm.type\"}},[_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"所有資料\")]),_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"限本帳號\")])],1)],1)],1),_c('el-form-item',{attrs:{\"label\":\"描述信息\",\"prop\":\"remark\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.editForm.remark),callback:function ($$v) {_vm.$set(_vm.editForm, \"remark\", $$v)},expression:\"editForm.remark\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading,\"disabled\":_vm.btnDisabled},on:{\"click\":_vm.updateRole}},[_vm._v(\"確 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配選單權限\",\"visible\":_vm.grantDialogVisible,\"width\":\"38%\"},on:{\"update:visible\":function($event){_vm.grantDialogVisible=$event}}},[_c('span',[_c('el-tree',{ref:\"tree\",attrs:{\"auto-expand-parent\":false,\"data\":_vm.data,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expanded-keys\":_vm.open,\"props\":_vm.defaultProps,\"highlight-current\":\"\"},on:{\"check-change\":_vm.checkChange}})],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.grantDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{directives:[{name:\"hasPermission\",rawName:\"v-hasPermission\",value:('role:authority'),expression:\"'role:authority'\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-setting\",\"loading\":_vm.btnLoading,\"disabled\":_vm.btnDisabled},on:{\"click\":_vm.authority}},[_vm._v(\"授 權\")])],1)])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"roles\">\n    <!-- 面包導航 -->\n    <el-breadcrumb\n      separator=\"/\"\n      style=\"padding-left: 10px; padding-bottom: 10px; font-size: 12px\"\n    >\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首頁</el-breadcrumb-item>\n      <el-breadcrumb-item>權限管理</el-breadcrumb-item>\n      <el-breadcrumb-item>角色權限</el-breadcrumb-item>\n    </el-breadcrumb>\n    <!-- 卡片主體 -->\n    <el-card class=\"box-card\">\n      <!-- 上面工具欄 -->\n      <el-row :gutter=\"20\">\n        <el-col :span=\"8\">\n          <el-input\n            clearable\n            size=\"small\"\n            placeholder=\"請輸入角色名查詢\"\n            v-model=\"queryMap.roleName\"\n            class=\"input-with-select\"\n            @clear=\"getRoleList\"\n          >\n            <el-button\n              slot=\"append\"\n              icon=\"el-icon-search\"\n              @click=\"search\"\n            ></el-button>\n          </el-input>\n        </el-col>\n        <div style=\"float: right; margin-right: 20px\">\n          <el-button\n            size=\"small\"\n            v-hasPermission=\"'role:add'\"\n            type=\"success\"\n            icon=\"el-icon-circle-plus-outline\"\n            @click=\"addDialogVisible = true\"\n            >新增</el-button\n          >\n          <el-button\n            size=\"small\"\n            v-hasPermission=\"'role:export'\"\n            icon=\"el-icon-download\"\n            @click=\"downExcel\"\n            >下載</el-button\n          >\n        </div>\n      </el-row>\n      <!-- 表格區域 -->\n      <template>\n        <el-table\n          empty-text=\"暫無數據\"\n          v-loading=\"loading\"\n          :data=\"roleData\"\n          border\n          style=\"width: 100%; margin-top: 20px\"\n          height=\"470\"\n          size=\"small\"\n        >\n          <!-- <el-table-column prop=\"id\" label=\"序號\" width=\"180\"></el-table-column> -->\n          <el-table-column label=\"序號\" type=\"index\" :index=\"getIndex\" width=\"50\">\n          </el-table-column>\n          <el-table-column\n            prop=\"roleName\"\n            label=\"角色名稱\"\n            width=\"180\"\n          ></el-table-column>\n          <el-table-column\n            prop=\"modifiedTime\"\n            label=\"最後修改時間\"\n            width=\"150\"\n          ></el-table-column>\n          <el-table-column\n            prop=\"type\"\n            :formatter=\"showSex\"\n            label=\"資料權限\"\n            width=\"100\"\n          >\n            <template slot-scope=\"scope\">\n              <el-tag size=\"small\" type=\"warning\" v-if=\"scope.row.type == 1\"\n                >限本帳號</el-tag\n              >\n              <el-tag size=\"small\" type=\"success\" v-else>所有資料</el-tag>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"remark\" label=\"備註\"></el-table-column>\n          <el-table-column prop=\"isban\" label=\"停用\" width=\"100\">\n            <template slot-scope=\"scope\">\n              <el-switch\n                v-model=\"scope.row.status\"\n                @change=\"changRoleStatus(scope.row)\"\n              ></el-switch>\n            </template>\n          </el-table-column>\n          <el-table-column fixed=\"right\" label=\"操作\" width=\"200\">\n            <template slot-scope=\"scope\">\n              <el-button\n                @click=\"grant(scope.row.id)\"\n                type=\"text\"\n                icon=\"el-icon-present\"\n                size=\"small\"\n                >授權</el-button\n              >\n              <el-button\n                @click=\"edit(scope.row.id)\"\n                v-hasPermission=\"'role:edit'\"\n                type=\"text\"\n                icon=\"el-icon-edit\"\n                size=\"small\"\n                >編輯</el-button\n              >\n              <!-- <el-button\n                                    v-hasPermission=\"'role:delete'\"\n                                    @click=\"del(scope.row.id)\"\n                                    type=\"text\"\n                                    icon=\"el-icon-delete\"\n                                    size=\"small\"\n                            >删除</el-button> -->\n            </template>\n          </el-table-column>\n        </el-table>\n      </template>\n      <!-- 分頁部分 -->\n      <el-pagination\n        background\n        style=\"margin-top: 10px\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"queryMap.pageNum\"\n        :page-sizes=\"[7, 10, 15, 20]\"\n        :page-size=\"queryMap.pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      ></el-pagination>\n      <!-- 新增彈框 -->\n      <el-dialog\n        title=\"新增角色權限\"\n        :visible.sync=\"addDialogVisible\"\n        width=\"50%\"\n        @close=\"closeAdd\"\n      >\n        <el-form\n          ref=\"addFormRef\"\n          :model=\"addForm\"\n          label-width=\"80px\"\n          :rules=\"addFormRoles\"\n        >\n          <el-form-item label=\"角色名稱\" prop=\"roleName\">\n            <el-input v-model=\"addForm.roleName\"></el-input>\n          </el-form-item>\n          <div class=\"grid-content bg-purple-light\">\n            <el-form-item label=\"資料權限\" prop=\"type\">\n              <el-radio-group v-model=\"addForm.type\">\n                <el-radio :label=\"0\">所有資料</el-radio>\n                <el-radio :label=\"1\">限本帳號</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </div>\n          <el-form-item label=\"描述信息\" prop=\"remark\">\n            <el-input type=\"textarea\" v-model=\"addForm.remark\"></el-input>\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"addDialogVisible = false\">取 消</el-button>\n          <el-button\n            type=\"primary\"\n            @click=\"addRole\"\n            :loading=\"btnLoading\"\n            :disabled=\"btnDisabled\"\n            >確 定</el-button\n          >\n        </span>\n      </el-dialog>\n      <!-- 編輯彈框 -->\n      <el-dialog\n        title=\"編輯角色權限\"\n        :visible.sync=\"editDialogVisible\"\n        width=\"50%\"\n        @close=\"closeEdit\"\n      >\n        <el-form\n          ref=\"editFormRef\"\n          :model=\"editForm\"\n          label-width=\"80px\"\n          :rules=\"addFormRoles\"\n        >\n          <el-form-item label=\"角色名稱\" prop=\"roleName\">\n            <el-input v-model=\"editForm.roleName\"></el-input>\n          </el-form-item>\n          <div class=\"grid-content bg-purple-light\">\n            <el-form-item label=\"資料權限\" prop=\"type\">\n              <el-radio-group v-model=\"editForm.type\">\n                <el-radio :label=\"0\">所有資料</el-radio>\n                <el-radio :label=\"1\">限本帳號</el-radio>\n              </el-radio-group>\n            </el-form-item>\n          </div>\n          <el-form-item label=\"描述信息\" prop=\"remark\">\n            <el-input type=\"textarea\" v-model=\"editForm.remark\"></el-input>\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"editDialogVisible = false\">取 消</el-button>\n          <el-button\n            type=\"primary\"\n            @click=\"updateRole\"\n            :loading=\"btnLoading\"\n            :disabled=\"btnDisabled\"\n            >確 定</el-button\n          >\n        </span>\n      </el-dialog>\n      <!-- 角色授權彈出框 -->\n      <el-dialog\n        title=\"分配選單權限\"\n        :visible.sync=\"grantDialogVisible\"\n        width=\"38%\"\n      >\n        <span>\n          <el-tree\n            :auto-expand-parent=\"false\"\n            :data=\"data\"\n            show-checkbox\n            node-key=\"id\"\n            :default-expanded-keys=\"open\"\n            :props=\"defaultProps\"\n            ref=\"tree\"\n            highlight-current\n            @check-change=\"checkChange\"\n          ></el-tree>\n          <!-- check-strictly -->\n        </span>\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"grantDialogVisible = false\">取 消</el-button>\n          <el-button\n            v-hasPermission=\"'role:authority'\"\n            type=\"primary\"\n            icon=\"el-icon-setting\"\n            @click=\"authority\"\n            :loading=\"btnLoading\"\n            :disabled=\"btnDisabled\"\n            >授 權</el-button\n          >\n        </span>\n      </el-dialog>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      btnLoading: false,\n      btnDisabled: false,\n      loading: true,\n      total: 0,\n      queryMap: { roleName: \"\", pageNum: 1, pageSize: 8 }, //查詢條件\n      roleData: [], //角色表格數據\n      addForm: { type: 0 }, //新增數據\n      editForm: {}, //編輯數據\n      addDialogVisible: false, //新增彈框的顯示\n      editDialogVisible: false, //編輯彈框\n      grantDialogVisible: false, //授權彈出框\n      data: [],\n      open: [], //展開\n      grantId: \"\",\n      defaultProps: {\n        children: \"children\",\n        label: \"menuName\",\n      },\n      addFormRoles: {\n        roleName: [\n          { required: true, message: \"請輸入角色名稱\", trigger: \"blur\" },\n        ],\n        type: [{ required: true, message: \"請選擇資料權限\", trigger: \"blur\" }],\n      }, //新增驗證規則\n    };\n  },\n  methods: {\n    getIndex(index) {\n      return (this.queryMap.pageNum - 1) * this.queryMap.pageSize + index + 1;\n    },\n    checkChange(a, b, c) {\n      const anode = this.$refs.tree.getNode(a);\n      !anode.checked ? this.findchildren(anode.parent) : \"\";\n    },\n    findchildren(current) {\n      const fnode = this.$refs.tree.getNode(current);\n      if (!fnode.isLeaf) {\n        fnode.indeterminate = true;\n        fnode.checked = true;\n      }\n    },\n    /**\n     * 加載選單表格\n     */\n    downExcel() {\n      const $this = this;\n      const res = axios\n        .request({\n          url: \"system/role/excel\",\n          method: \"post\",\n          responseType: \"blob\",\n        })\n        .then((res) => {\n          if (res.headers[\"content-type\"] === \"application/json\") {\n            return $this.$message.error(\n              \"Subject does not have permission [role:export]\"\n            );\n          }\n          const data = res.data;\n          let url = window.URL.createObjectURL(data); // 將二進制文件轉化為可訪問的url\n          const a = document.createElement(\"a\");\n          document.body.appendChild(a);\n          a.href = url;\n          a.download = \"角色列表.xls\";\n          a.click();\n          window.URL.revokeObjectURL(url);\n        });\n    },\n\n    //獲取選中的節點\n    async authority() {\n      this.btnDisabled = true;\n      this.btnLoading = true;\n      const { data: res } = await this.$http.post(\n        \"system/role/authority/\" + this.grantId,\n        [].concat(\n          this.$refs.tree.getCheckedKeys(),\n          this.$refs.tree.getHalfCheckedKeys()\n        )\n      );\n      if (res.success) {\n        this.$message.success(\"角色授權成功\");\n      } else {\n        this.$message.error(\"角色授權失敗:\" + res.data.errorMsg);\n      }\n      this.btnDisabled = false;\n      this.btnLoading = false;\n      this.grantDialogVisible = false;\n    },\n\n    //用戶授權\n    async grant(id) {\n      //加載所有選單以及用戶擁有的選單權限id\n      const { data: res } = await this.$http.get(\n        \"system/role/findRoleMenu/\" + id\n      );\n      if (res.success) {\n        //默認選中的樹的數據\n        let that = this;\n        setTimeout(function () {\n          res.data.mids.forEach((value) => {\n            that.$refs.tree.setChecked(value, true, false);\n          });\n        }, 100);\n        this.data = res.data.tree;\n        this.open = res.data.open;\n        this.grantId = id; //需要授權的id\n      }\n      this.grantDialogVisible = true;\n    },\n    //加載用戶列表\n    async getRoleList() {\n      const { data: res } = await this.$http.get(\"system/role/findRoleList\", {\n        params: this.queryMap,\n      });\n      if (res.success) {\n        this.roleData = res.data.rows;\n        this.total = res.data.total;\n      }\n    },\n    //搜索\n    search() {\n      this.queryMap.pageNum = 1;\n      this.getRoleList();\n    },\n    //關閉新增彈框\n    closeAdd() {\n      this.$refs.addFormRef.clearValidate();\n      this.addForm = { type: 0 };\n    },\n    closeEdit() {\n      this.$refs.editFormRef.clearValidate();\n      this.editForm = {};\n    },\n    //新增\n    async addRole() {\n      this.$refs.addFormRef.validate(async (valid) => {\n        if (!valid) {\n          return;\n        } else {\n          this.btnDisabled = true;\n          this.btnLoading = true;\n          const { data: res } = await this.$http.post(\n            \"system/role/add\",\n            this.addForm\n          );\n          if (res.success) {\n            this.$message.success(\"新增成功\");\n            this.addDialogVisible = false;\n            this.btnDisabled = false;\n            this.btnLoading = false;\n            this.addForm = {};\n            await this.getRoleList();\n          } else {\n            return this.$message.error(\"角色新增失敗:\" + res.data.errorMsg);\n          }\n        }\n      });\n    },\n    //編輯\n    async edit(id) {\n      const { data: res } = await this.$http.get(\"system/role/edit/\" + id);\n      if (res.success) {\n        this.editForm = res.data;\n        this.editDialogVisible = true;\n      } else {\n        return this.$message.error(\"角色編輯失敗:\" + res.data.errorMsg);\n      }\n    },\n    //更新用戶\n    async updateRole() {\n      this.$refs.editFormRef.validate(async (valid) => {\n        if (!valid) {\n          return;\n        } else {\n          this.btnDisabled = true;\n          this.btnLoading = true;\n          const { data: res } = await this.$http.put(\n            \"system/role/update/\" + this.editForm.id,\n            this.editForm\n          );\n          if (res.success) {\n            this.$notify({\n              title: \"成功\",\n              message: \"角色信息更新\",\n              type: \"success\",\n            });\n            await this.getRoleList();\n          } else {\n            this.$message.error(\"角色信息更新失敗:\" + res.data.errorMsg);\n          }\n\n          this.editDialogVisible = false;\n          this.btnDisabled = false;\n          this.btnLoading = false;\n          this.editForm = {};\n        }\n      });\n    },\n    //删除\n    async del(id) {\n      var res = await this.$confirm(\n        \"此操作將永久删除該角色, 是否繼續?\",\n        \"提示\",\n        {\n          confirmButtonText: \"確定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\",\n        }\n      ).catch(() => {\n        this.$message({\n          type: \"info\",\n          message: \"已取消删除\",\n        });\n      });\n      if (res === \"confirm\") {\n        const { data: res } = await this.$http.delete(\n          \"system/role/delete/\" + id\n        );\n        console.log(res);\n        if (res.success) {\n          this.$message.success(\"删除成功\");\n          await this.getRoleList();\n        } else {\n          this.$message.error(\"删除失敗:\" + res.data.errorMsg);\n        }\n      }\n    },\n    //改變用戶禁用狀態\n    async changRoleStatus(row) {\n      const { data: res } = await this.$http.put(\n        \"system/role/updateStatus/\" + row.id + \"/\" + row.status\n      );\n\n      if (!res.success) {\n        this.$message.error(\"更新角色狀態失敗:\" + res.data.errorMsg);\n        row.status = !row.status;\n      } else {\n        const message = row.status ? \"角色狀態已禁用\" : \"角色狀態已啟用\";\n        this.$notify.success({\n          title: \"操作成功\",\n          message: message,\n        });\n      }\n    },\n    //改變頁碼\n    handleSizeChange(newSize) {\n      this.queryMap.pageSize = newSize;\n      this.getRoleList();\n    },\n    //翻頁\n    handleCurrentChange(current) {\n      this.queryMap.pageNum = current;\n      this.getRoleList();\n    },\n  },\n  created() {\n    this.getRoleList();\n    setTimeout(() => {\n      this.loading = false;\n    }, 500);\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./role.vue?vue&type=template&id=a359ca2e&\"\nimport script from \"./role.vue?vue&type=script&lang=js&\"\nexport * from \"./role.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}