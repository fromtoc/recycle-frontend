(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e94f8a5"],{"0110":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"productCategroys"}},[r("el-breadcrumb",{staticStyle:{"padding-left":"10px","padding-bottom":"10px","font-size":"12px"},attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首頁")]),r("el-breadcrumb-item",[e._v("廢棄物流向")]),r("el-breadcrumb-item",[e._v("廢棄物来源")])],1),r("el-card",{staticClass:"box-card"},[r("el-form",{staticClass:"demo-form-inline",attrs:{size:"mini",inline:!0,model:e.queryMap}},[r("el-form-item",{attrs:{label:"省市區縣"}},[r("el-input",{attrs:{clearable:"",placeholder:"省市區縣"},on:{clear:e.search},model:{value:e.queryMap.address,callback:function(t){e.$set(e.queryMap,"address",t)},expression:"queryMap.address"}})],1),r("el-form-item",{attrs:{label:"聯繫人"}},[r("el-input",{attrs:{clearable:"",placeholder:"聯繫人"},on:{clear:e.search},model:{value:e.queryMap.contact,callback:function(t){e.$set(e.queryMap,"contact",t)},expression:"queryMap.contact"}})],1),r("el-form-item",{attrs:{label:"具體地點"}},[r("el-input",{staticClass:"input-with-el-select",attrs:{clearable:"",placeholder:"請具體地點查詢"},on:{clear:e.search},model:{value:e.queryMap.name,callback:function(t){e.$set(e.queryMap,"name",t)},expression:"queryMap.name"}})],1),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v(" 查詢")]),r("el-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"supplier:add",expression:"'supplier:add'"}],attrs:{type:"success",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("新增")])],1)],1),[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",size:"mini",stripe:"",data:e.supplierData,height:"460"}},[r("el-table-column",{attrs:{prop:"id",type:"index",label:"ID",width:"50"}}),r("el-table-column",{attrs:{label:"廢棄物提供方地址"}},[r("el-table-column",{attrs:{prop:"address",label:"省份",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{domProps:{textContent:e._s(t.row.address.split("/")[0])}})]}}])}),r("el-table-column",{attrs:{prop:"address",label:"市",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{domProps:{textContent:e._s(t.row.address.split("/")[1])}})]}}])}),r("el-table-column",{attrs:{prop:"address",label:"區縣",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{domProps:{textContent:e._s(t.row.address.split("/")[2])}})]}}])}),r("el-table-column",{attrs:{prop:"name",label:"地址",width:"180"}})],1),r("el-table-column",{attrs:{prop:"createTime",label:"創建時間",width:"180"}}),r("el-table-column",{attrs:{prop:"email",label:"郵箱",width:"180"}}),r("el-table-column",{attrs:{prop:"contact",label:"聯繫人",width:"120"}}),r("el-table-column",{attrs:{prop:"phone",label:"電話",width:"120"}}),r("el-table-column",{attrs:{prop:"sort",label:"排序",width:"80"}}),r("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"supplier:edit",expression:"'supplier:edit'"}],attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return e.edit(t.row.id)}}},[e._v("編輯")]),r("el-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"supplier:delete",expression:"'supplier:delete'"}],attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return e.del(t.row.id)}}},[e._v("删除")])]}}])})],1)],r("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":this.queryMap.pageNum,"page-sizes":[10,15,20],"page-size":this.queryMap.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"新增来源",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.closeAddDialog}},[r("span",[r("el-form",{ref:"addRuleFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addRuleForm,rules:e.addRules,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:8}},[r("div",{staticClass:"grid-content bg-purple"}),r("el-form-item",{attrs:{label:"省份",prop:"valueProvince"}},[r("el-select",{attrs:{placeholder:"請選擇省"},on:{change:e.changeProvince},model:{value:e.addRuleForm.valueProvince,callback:function(t){e.$set(e.addRuleForm,"valueProvince",t)},expression:"addRuleForm.valueProvince"}},e._l(e.provinceList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"grid-content bg-purple-light"},[r("el-form-item",{attrs:{label:"城市",prop:"valueCity"}},[r("el-select",{attrs:{placeholder:"請選擇市"},on:{change:e.changeCity},model:{value:e.addRuleForm.valueCity,callback:function(t){e.$set(e.addRuleForm,"valueCity",t)},expression:"addRuleForm.valueCity"}},e._l(e.cityOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)]),r("el-col",{attrs:{span:8}},[r("div",{staticClass:"grid-content bg-purple"},[r("el-form-item",{attrs:{label:"區縣",prop:"valueOrigin"}},[r("el-select",{attrs:{placeholder:"請選擇區"},on:{change:e.changeOrigin},model:{value:e.addRuleForm.valueOrigin,callback:function(t){e.$set(e.addRuleForm,"valueOrigin",t)},expression:"addRuleForm.valueOrigin"}},e._l(e.originOptions,(function(e){return r("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)],1)],1)])],1),r("el-form-item",{attrs:{label:"来源 名稱",prop:"name"}},[r("el-input",{model:{value:e.addRuleForm.name,callback:function(t){e.$set(e.addRuleForm,"name",t)},expression:"addRuleForm.name"}})],1),r("el-form-item",{attrs:{label:"聯繫人",prop:"contact"}},[r("el-input",{model:{value:e.addRuleForm.contact,callback:function(t){e.$set(e.addRuleForm,"contact",t)},expression:"addRuleForm.contact"}})],1),r("el-form-item",{attrs:{label:"郵箱",prop:"email"}},[r("el-input",{model:{value:e.addRuleForm.email,callback:function(t){e.$set(e.addRuleForm,"email",t)},expression:"addRuleForm.email"}})],1),r("el-form-item",{attrs:{label:"電話",prop:"phone"}},[r("el-input",{model:{value:e.addRuleForm.phone,callback:function(t){e.$set(e.addRuleForm,"phone",t)},expression:"addRuleForm.phone"}})],1),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input-number",{attrs:{min:1,max:10,label:"排序"},model:{value:e.addRuleForm.sort,callback:function(t){e.$set(e.addRuleForm,"sort",t)},expression:"addRuleForm.sort"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("確 定")])],1)]),r("el-dialog",{attrs:{title:"更新来源",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.closeEditDialog}},[r("span",[r("el-form",{ref:"editRuleFormRef",staticClass:"demo-ruleForm",attrs:{model:e.editRuleForm,rules:e.addRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"省市區縣",prop:"address"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editRuleForm.address,callback:function(t){e.$set(e.editRuleForm,"address",t)},expression:"editRuleForm.address"}})],1),r("el-form-item",{attrs:{label:"来源详细地",prop:"name"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.editRuleForm.name,callback:function(t){e.$set(e.editRuleForm,"name",t)},expression:"editRuleForm.name"}})],1),r("el-form-item",{attrs:{label:"聯繫人",prop:"contact"}},[r("el-input",{model:{value:e.editRuleForm.contact,callback:function(t){e.$set(e.editRuleForm,"contact",t)},expression:"editRuleForm.contact"}})],1),r("el-form-item",{attrs:{label:"郵箱",prop:"email"}},[r("el-input",{model:{value:e.editRuleForm.email,callback:function(t){e.$set(e.editRuleForm,"email",t)},expression:"editRuleForm.email"}})],1),r("el-form-item",{attrs:{label:"電話",prop:"phone"}},[r("el-input",{model:{value:e.editRuleForm.phone,callback:function(t){e.$set(e.editRuleForm,"phone",t)},expression:"editRuleForm.phone"}})],1),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input-number",{attrs:{min:1,max:10,label:"排序"},model:{value:e.editRuleForm.sort,callback:function(t){e.$set(e.editRuleForm,"sort",t)},expression:"editRuleForm.sort"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("確 定")])],1)])],2)],1)},i=[],n=r("1da1"),l=(r("96cf"),r("8ba4"),r("a9e3"),r("159b"),r("d3b7"),r("25f0"),r("ac1f"),r("466d"),r("b0c0"),r("fb6a"),{data:function(){var e=function(e,t,r){var a=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!t)return r(new Error("郵箱不能為空"));setTimeout((function(){a.test(t)?r():r(new Error("請輸入正確的郵箱格式"))}),100)},t=function(e,t,r){var a=/^1[34578]\d{9}$$/;if(!t)return r(new Error("電話號碼不能為空"));setTimeout((function(){Number.isInteger(+t)?a.test(t)?r():r(new Error("電話號碼格式不正確")):r(new Error("請輸入數字值"))}),100)};return{loading:!0,editDialogVisible:!1,addDialogVisible:!1,total:0,supplierData:[],queryMap:{pageNum:1,pageSize:10,name:""},addRuleForm:{},editRuleForm:{},deans:[],addRules:{name:[{required:!0,message:"請輸入来源名稱",trigger:"blur"},{min:2,max:50,message:"長度在 2 到 50 個字符",trigger:"blur"}],address:[{required:!0,message:"請輸入地址信息",trigger:"blur"},{min:2,max:12,message:"長度在 2 到 12 個字符",trigger:"blur"}],email:[{required:!0,validator:e,trigger:"blur"}],valueProvince:[{required:!0,message:"請輸入省份",trigger:"blur"}],valueCity:[{required:!0,message:"請輸入城市",trigger:"blur"}],valueOrigin:[{required:!0,message:"請輸入區縣",trigger:"blur"}],sort:[{required:!0,message:"請輸入排序號",trigger:"blur"}],contact:[{required:!0,message:"請輸入聯繫人",trigger:"blur"}],phone:[{required:!0,message:"請輸入聯繫方式",validator:t,trigger:"blur"}]},provinceList:[],cityList:[],originList:[],cityOptions:[],originOptions:[]}},methods:{search:function(){this.queryMap.pageNum=1,this.getSupplierList()},del:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作將永久删除該用戶, 是否繼續?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 2:if(a=r.sent,"confirm"!==a){r.next=15;break}return r.next=6,t.$http.delete("business/supplier/delete/"+e);case 6:if(i=r.sent,n=i.data,!n.success){r.next=14;break}return t.$message.success("来源删除成功"),r.next=12,t.getSupplierList();case 12:r.next=15;break;case 14:t.$message.error(n.data.errorMsg);case 15:case"end":return r.stop()}}),r)})))()},update:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editRuleFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.$http.put("business/supplier/update/"+e.editRuleForm.id,e.editRuleForm);case 6:if(a=t.sent,i=a.data,!i.success){t.next=15;break}return e.$notify({title:"成功",message:"来源信息更新",type:"success"}),e.editRuleForm={},t.next=13,e.getSupplierList();case 13:t.next=16;break;case 15:e.$message.error("来源信息更新失敗:"+i.data.errorMsg);case 16:e.editDialogVisible=!1;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},edit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.get("business/supplier/edit/"+e);case 2:if(a=r.sent,i=a.data,!i.success){r.next=8;break}t.editRuleForm=i.data,r.next=9;break;case 8:return r.abrupt("return",t.$message.error("来源信息編輯失敗"+i.data.errorMsg));case 9:t.editDialogVisible=!0;case 10:case"end":return r.stop()}}),r)})))()},add:function(){var e=this;this.$refs.addRuleFormRef.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=4;break}return t.abrupt("return");case 4:return e.addRuleForm.address=e.addRuleForm.province+"/"+e.addRuleForm.city+"/"+e.addRuleForm.origin,t.next=7,e.$http.post("business/supplier/add",e.addRuleForm);case 7:if(a=t.sent,i=a.data,!i.success){t.next=16;break}return e.$message.success("来源新增成功"),e.addRuleForm={},t.next=14,e.getSupplierList();case 14:t.next=17;break;case 16:return t.abrupt("return",e.$message.error("来源新增失敗:"+i.data.errorMsg));case 17:e.addDialogVisible=!1;case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getSupplierList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("business/supplier/findSupplierList",{params:e.queryMap});case 2:if(r=t.sent,a=r.data,a.success){t.next=8;break}return t.abrupt("return",e.$message.error("獲取用戶列表失敗:"+a.data.errorMsg));case 8:e.total=a.data.total,e.supplierData=a.data.rows;case 10:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryMap.pageSize=e,this.getSupplierList()},handleCurrentChange:function(e){this.queryMap.pageNum=e,this.getSupplierList()},closeAddDialog:function(){this.$refs.addRuleFormRef.clearValidate(),this.addRuleForm={}},closeEditDialog:function(){this.$refs.editRuleFormRef.clearValidate(),this.editRuleForm={}},changeProvince:function(e){var t=this;this.provinceList.forEach((function(r,a){e.toString()===t.provinceList[a].value&&(t.cityOptions=t.provinceList[a].children,t.addRuleForm.valueCity=t.provinceList[a].children[0].value,t.addRuleForm.city=t.provinceList[a].children[0].label,t.addRuleForm.valueOrigin=t.provinceList[a].children[0].children[0].value,t.addRuleForm.origin=t.provinceList[a].children[0].children[0].label,t.originOptions=t.provinceList[a].children[0].children,t.addRuleForm.province=t.provinceList[a].label)}))},changeCity:function(e){var t=this;this.cityList.forEach((function(r,a){e.toString()===t.cityList[a].value&&(t.originOptions=t.cityList[a].children,t.addRuleForm.valueOrigin=t.cityList[a].children[0].value,t.addRuleForm.city=t.cityList[a].label)}))},changeOrigin:function(e){var t=this;this.addRuleForm.valueOrigin=e,this.originList.forEach((function(r,a){e.toString()===t.originList[a].value&&(t.addRuleForm.origin=t.originList[a].label)})),this.$forceUpdate()},_getJsonData:function(){var e=this;this.$http.get("/json/provinces.json").then((function(t){for(var r in e.provinceList=[],e.cityList=[],e.originList=[],t.data.forEach((function(t){t.value.match(/0000$/)?e.provinceList.push({value:t.value,label:t.name,children:[]}):t.value.match(/00$/)?e.cityList.push({value:t.value,label:t.name,children:[]}):e.originList.push({value:t.value,label:t.name})})),e.provinceList)for(var a in e.cityList)e.provinceList[r].value.slice(0,2)===e.cityList[a].value.slice(0,2)&&e.provinceList[r].children.push(e.cityList[a]);for(var i in e.cityList)for(var n in e.originList)e.originList[n].value.slice(0,4)===e.cityList[i].value.slice(0,4)&&e.cityList[i].children.push(e.originList[n])}))}},created:function(){var e=this;this.getSupplierList(),this._getJsonData(),setTimeout((function(){e.loading=!1}),500)}}),s=l,o=r("2877"),u=Object(o["a"])(s,a,i,!1,null,null,null);t["default"]=u.exports},"408a":function(e,t){var r=1..valueOf;e.exports=function(e){return r.call(e)}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var a=r("1d80"),i=r("577e"),n=r("5899"),l="["+n+"]",s=RegExp("^"+l+l+"*"),o=RegExp(l+l+"*$"),u=function(e){return function(t){var r=i(a(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(o,"")),r}};e.exports={start:u(1),end:u(2),trim:u(3)}},7156:function(e,t,r){var a=r("1626"),i=r("861d"),n=r("d2bb");e.exports=function(e,t,r){var l,s;return n&&a(l=t.constructor)&&l!==r&&i(s=l.prototype)&&s!==r.prototype&&n(e,s),e}},"8ba4":function(e,t,r){var a=r("23e7"),i=r("eac5");a({target:"Number",stat:!0},{isInteger:i})},a9e3:function(e,t,r){"use strict";var a=r("83ab"),i=r("da84"),n=r("94ca"),l=r("6eeb"),s=r("1a2d"),o=r("7156"),u=r("d9b5"),c=r("c04e"),d=r("d039"),p=r("241c").f,m=r("06cf").f,f=r("9bf2").f,b=r("408a"),g=r("58a8").trim,v="Number",h=i[v],R=h.prototype,y=function(e){var t=c(e,"number");return"bigint"===typeof t?t:F(t)},F=function(e){var t,r,a,i,n,l,s,o,d=c(e,"number");if(u(d))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof d&&d.length>2)if(d=g(d),t=d.charCodeAt(0),43===t||45===t){if(r=d.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(d.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+d}for(n=d.slice(2),l=n.length,s=0;s<l;s++)if(o=n.charCodeAt(s),o<48||o>i)return NaN;return parseInt(n,a)}return+d};if(n(v,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var x,w=function(e){var t=arguments.length<1?0:h(y(e)),r=this;return r instanceof w&&d((function(){b(r)}))?o(Object(t),r,w):t},k=a?p(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;k.length>L;L++)s(h,x=k[L])&&!s(w,x)&&f(w,x,m(h,x));w.prototype=R,R.constructor=w,l(i,v,w)}},eac5:function(e,t,r){var a=r("861d"),i=Math.floor;e.exports=Number.isInteger||function(e){return!a(e)&&isFinite(e)&&i(e)===e}}}]);
//# sourceMappingURL=chunk-7e94f8a5.51a383f3.js.map